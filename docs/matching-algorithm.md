# マッチングアルゴリズム

## 概要
MVP段階では「最速で成立」を最優先にしたシンプルなマッチングを実装。

## フロー

1. ユーザーAが募集を作成（ゲーム、地域、開始可能時刻を指定）
2. ユーザーBがロビーで募集一覧を確認
3. ユーザーBが「参加する」ボタンを押す
4. サーバーサイドでマッチ判定:
   - 募集がまだopen状態であること
   - 募集が有効期限内であること
   - ブロック関係がないこと（双方向チェック）
   - 両ユーザーが既にアクティブルームを持っていないこと
5. 条件を満たせばルーム作成 → 双方にルームIDを返却

## 競合制御
- PostgreSQLでは `SELECT ... FOR UPDATE SKIP LOCKED` を使用
- 同一募集に複数ユーザーが同時に参加した場合、最初のトランザクションのみが成功

## 将来の拡張案
- 自動マッチング（同一ゲーム & 地域 & 開始時刻±15分の募集同士を自動マッチ）
- 待機時間が長い順（FIFO）の優先
- Elo/ランクベースのスコアリング
